<!DOCTYPE html>
<head>
	<title>MOD Sandbox Dashboard</title>
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1" />
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="robots" content="NOODP" />
	
	<link rel="icon" href="img/favicon.ico">
	<link rel="shortcut icon" href="img/favicon.png">
	
	<link href="https://fonts.googleapis.com/css?family=Merriweather:300,300italic,400,400italic,700,700italic|Hind:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="css/styles.css" media="all">
	<link rel="stylesheet" href="css/print.css" type="text/css" media="print">
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script>
	$(document).ready(function(){
	  // Add smooth scrolling to all links
	  $("a.nav_link ").on('click', function(event) {
		// Make sure this.hash has a value before overriding default behavior
		if (this.hash !== "") {
		  // Prevent default anchor click behavior
		  event.preventDefault();
		  // Store hash
		  var hash = this.hash;
		  // Using jQuery's animate() method to add smooth page scroll
		  // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
		  $('html, body').animate({
			scrollTop: $(hash).offset().top
		  }, 800, function(){
	   
			// Add hash (#) to URL when done scrolling (default click behavior)
			window.location.hash = hash;
		  });
		} // End if
	  });
	});
	</script>
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	<script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
	<link href='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css' rel='stylesheet' />
</head>

<body id="top">
	<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
	<nav class="mast" role="navigation">
		<div class="mast-wrapper">
			<div class="logo">
				<a href="http://www.trimet.org"><img src="img/index.svg" width="185" height="42" class="mast-logo"></a>
			</div>
		</div>
	</nav>
	
	<div class="standardheader">
		<p class="breadcrumb"><a href="http://www.trimet.org">Home</a> : <a href="index.html">MOD Sandbox</a></p>
		<h1>MOD Sandbox Dashboard: <small>February 2016</small></h1>
		
		<div class="first">
			<p>TriMet&rsquo;s OTP SUM project will create a complete open platform for the integration of transit and shared-use mobility options.  The open data, software and user interfaces, responsive on both web and mobile, will help customers make informed decisions about their mobility choices, including the critical first and last miles of transit trips where a bus or train alone doesn&rsquo;t provide full access.</p>
		</div>
	</div>

	<div class="section">
		<p>Updated weekly, this dashboard provides a snapshot of the MOD Sandbox project&rsquo;s progress. These key indicators help us track progress toward project deliverables and the budget.  In addition, we will be sharing project updates and lessons learned through this dashboard.</p>
	</div>

	<div class="section">
		<ul class="anchor tight">
			<li><a href="about.html">About OTP</a></li>
            <li><a href="about_pelias.html">About Pelias</a></li>
			<li><a href="#progress" class="nav_link">Progress</a></li>
			<li><a href="#budget" class="nav_link">Budget</a></li>
			<li><a href="#partners" class="nav_link">Partnerships</a></li>
			<li><a href="#management" class="nav_link">Project Management</a></li>
			<li><a href="#evaluations" class="nav_link">Evaluation and Metrics</a></li>
			<!-- <li><a href="#lessons" class="nav_link">Lessons Learned</a></li> -->
		</ul>
	</div>

	<div class="section headerbar" id="progress">
		<h2 class="strata">Progress</h2>
	</div>

	<div class="section">
		<p>TriMetâ€™s proposed project includes the development and expansion of two core data frameworks that current and future collaborative OTP initiatives can be built upon, producing replicable software and results for communities across the country. These two foundational core project elements are to:</p>
		<br>
		<ul class="bullets">
			<li>Extend the Open Trip Planner code base to support the integration of transit trip planning with shared-use mobility modes, such as bike share and transportation network companies (TNCs), as well as updated real-time transit information.</li>
			<br>
			<li>Implement a fully functional and comprehensive open geocoder built off the existing Mapzen Pelias geocoder.</li>
		</ul>
		
		<div class="chart_container">
			<div class="full_chart" id="gantt">
				<!-- <script src="./js/gantt.js"></script> -->
				<embed class="full_chart" src="https://plot.ly/~mosteele/25.embed?autosize=True&link=false&modebar=false&logo=false">
			</div>
			<div class="full_chart_legend_div">
				<p class=full_chart_legend>The MOD Sandbox project is divided into six main tasks: Project Management, Evaluations &amp; Reports, Application Development, Geocoder Development, Data Improvements and an Integrated Payment Plan.</p>
			</div>
			<p class="top"><a href="#top" class="nav_link">Top</a></p>
		</div>
	</div>
	
	<div class="section headerbar" id="budget">
		<h2 class="strata">Budget</h2>
	</div>
	
	<div class="section">	
		<div class="chart_container">
			<div class="half_chart left">
				<embed class="half_chart" src="https://plot.ly/~mosteele/33.embed?autosize=True&link=false&modebar=false&logo=false">
			</div>
			<div class="half_chart">
				<embed class="half_chart" src="https://plot.ly/~mosteele/23.embed?autosize=True&link=false&modebar=false&logo=false">
			</div>
			<div class="half_chart_legend_div">
				<p class="half_chart_legend">The above pie chart illustrates the amount and percentage of the budget allocated to each of the main tasks, divided into MOD grant expenses and in kind contributions.</p>
			</div>
			<div class="half_chart_legend_div">
				<p class="half_chart_legend">The above bar chart shows the current amount spent for each of the tasks.</p>		
			</div>
		</div>
		<p class="top"><a href="#top" class="nav_link">Top</a></p>
	</div>

	<div class="section headerbar" id="partners">
		<h2 class="strata">Partnerships</h2>
	</div>
	<div class="section">
		<p>TriMet has several partners on the MOD Sandbox Grant project. The key partners, partner transit agencies and data providers can be found below.</p>
		<div class="map-container">
			<p>
			<div id="partner-map-navigation">
				<nav id="partner-filters" class="filter-ui"></nav>
			</div>
			<div id="partnerstext">
			</div>
			<div class="custom-popup" id="partner-map">
				<script>
				L.mapbox.accessToken = 'pk.eyJ1IjoidHRsaW4xIiwiYSI6ImNpeW5hZWt3eTAwMHY0M3F6NTJtY2cwN3IifQ.OeAih8x-MUWxhRiFj98Q2Q';
				var map = L.mapbox.map('partner-map')
					.setView([39.828175,-98.5795], 4)
					.addLayer(L.mapbox.tileLayer('mapbox.light'));
				
				var filters = document.getElementById('partner-filters');
				var markers = L.mapbox.featureLayer().loadURL('./json/partners.geojson');
				var partners = document.getElementById('partnerstext');
				
				markers.addTo(map);
				
				markers.on('ready', function(e) {
					var typesObj = {},
					types = [];
					var features = e.target._geojson.features;
					for (var i = 0; i < features.length; i++) {
						typesObj[features[i].properties['status']] = true;
					}
					for (var key in typesObj) {
						if ({}.hasOwnProperty.call(typesObj, key)) {
							types.push(key);
						}
					}
					
					var checkboxes = [];
					for (var j = 0; j < types.length; j++) {
						var item = filters.appendChild(document.createElement('div'));
						var checkbox = item.appendChild(document.createElement('input'));
						var label = item.appendChild(document.createElement('label'));
						checkbox.type = 'checkbox';
						checkbox.id = types[j];
						checkbox.checked = true;
						label.innerHTML = types[j];
						label.setAttribute('for', types[j]);
						checkbox.addEventListener('change', update);
						checkboxes.push(checkbox);
					}

					for (var i = 0; i < features.length; i++) {
						var pbox = partners.appendChild(document.createElement('div'));
						var pboxtext = pbox.appendChild(document.createElement('p'));
						let title = features[i].properties['title'];
						let desc = features[i].properties['description'];
						let text_color = features[i].properties['marker-color'];
						let partner_status = features[i].properties['status'];
						pbox.style.cursor = 'pointer';
						pbox.id = String(features[i].geometry['coordinates']) + text_color;
						pbox.class = partner_status.replace(" ", "-");
						let longitude = parseFloat(String(features[i].geometry['coordinates']).split(",")[0]);
						let latitude = parseFloat(String(features[i].geometry['coordinates']).split(",")[1]);
						let url_path = features[i].properties['url'];
						document.getElementById(String(features[i].geometry['coordinates']) + text_color).addEventListener('click', function(){
							map.setView([latitude, longitude], 15);
							var popup = L.popup()
								.setLatLng([latitude + 0.001, longitude])
								.setContent('<p style="font-size:12px;width:100%;"><span style="font-weight:800">' + title + "</span><br>" + desc + '<br><a href="' + url_path + '" target="_blank">' + url_path + '</a></p>')
								.openOn(map);
						});
						if (url_path !== "" ) {
							pboxtext.innerHTML = '<span style="background-color:' + text_color + ';color:#fff;padding:2px">' + title + "</span><br>" + desc + '<br><a href="' + url_path + '">' + url_path + '</a>';
						} else {
							pboxtext.innerHTML = '<span style="background-color:' + text_color + ';color:#fff;padding:2px">' + title + "</span><br>" + desc.slice(0, desc.indexOf(",")) + "<br>" + desc.slice(desc.indexOf(",") + 1, desc.length);
						}
					}
					
					function update() {
						var enabled = {};
						for (var k = 0; k < checkboxes.length; k++) {
							if (checkboxes[k].checked) enabled[checkboxes[k].id] = true;
						}
						
						markers.setFilter(function(feature) {
							return feature.properties['status'] in enabled;
						});
					}
				});
				
				
			</script>
			</div>
		</div>
		<p class="top"><a href="#top" class="nav_link">Top</a></p>
	</div>
	
	<div class="section headerbar" id="management">
		<h2 class="strata">Project Management</h2>
	</div>

	
	<div class="section">
		<p>We use Trello as a team To-Do list and as a place to keep track of meetings. Follow along with us through the Trello board below.</p>
		<div class="trello_board">
			<embed class="trello_board" src="https://trello.com/b/rJ3RAeVr.html">
		</div>
        
		<div class="drive_board">
			<p>Project documents are shared through Google Drive. You will need permissions to view the files below.</p>
			<embed class="drive_board" src="https://drive.google.com/embeddedfolderview?id=0B1jz7f2gE4K5dnlUQUFDcXVCVTQ#list" frameborder="0">
		</div>
		
        <div class="section">
        	<p>Upcoming Meetings and Agenda</p>
            <ul class="bullets large-font-size">
            	<li>Sunday, February 5, 2017 at 3:30 pm - Super Bowl | <a href="./docs/020517 Agenda.docx">Agenda</a></li>
            	<li>Monday, February 20, 2017 - President's Day | <a href="./docs/020517 Agenda.docx">Agenda</a></li>
          	</ul>
            
            <ul class="anchor tight">
                <li><a href="./calendar/Test.ics" download="Test.ics">Download the calendar (iCalendar).</a></li>
                <li><a href="./calendar/Test.pst" download="Test.pst">Download the calendar (Outlook).</a></li>
            </ul>
		</div>
		<p class="top"><a href="#top" class="nav_link">Top</a></p>
	</div>
	
	<div class="section headerbar" id="evaluations">
		<h2 class="strata">Evaluations and Metrics</h2>
	</div>

	<div class="section">
		<div class="chart_container">
			<div class="half_chart left">
				<embed class="half_chart" src="https://plot.ly/~mosteele/7.embed?autosize=True&link=false&modebar=false&logo=false">
			</div>
			<div class="half_chart">
				<embed class="half_chart" src="https://plot.ly/~mosteele/5.embed?autosize=True&link=false&modebar=false&logo=false">
			</div>
			<div class="half_chart_legend_div">
				<p class="half_chart_legend">This chart shows the total number of public comments we received by week. Portland received almost one foot of snow the week ending January 15!</p>
			</div>
			<div class="half_chart_legend_div">
				<p class="half_chart_legend">The pie chart shows the breakdown of the public comments by category.</p>
			</div>				
		</div>
		<p class="top"><a href="#top" class="nav_link">Top</a></p>
	</div>
	
<!-- 	<div class="section headerbar" id="lessons">
		<h2 class="strata">Lessons Learned</h2>
	</div>

	<div class="section">
		<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
		
		<p class="top"><a href="#top" class="nav_link">Top</a></p>
	</div> -->
	
	<div class="section">
		<div class="footer">
			<div class="footer-left">
				<div style="padding: 30px 30px 5px 30px;">
					<a href="/">
						<i class="icon icon-slogan icon-trimet-logo-slogan"></i>
					</a>
				</div>
				
				<div class="footer-bottom">
					&copy; 2017 TriMet
					 &bull;
					<a href="http://trimet.org/legal/index.htm">Terms of Use</a>
					 &bull;
					<a href="http://trimet.org/legal/privacy.htm">Privacy Policy</a>
					 &bull;
					<a href="http://trimet.org/about/index.htm">About Us</a>
					 &bull;
					<a href="http://trimet.org/contact/index.htm">Customer Service</a>
				</div>
			</div>
		</div>
	</div>
	
</body>
</html>